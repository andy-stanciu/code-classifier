class Solution {

    private int insertFrequency(char[] chars, int index, int count) {
        String freq = String.valueOf(count);
        for (char num : freq.toCharArray()) {
            chars[index++] = num;
        }
        return index;
    }

    public int compress(char[] chars) {
        char cur = chars[0];
        int count = 1;
        int index = 0;
        for (int i = 1; i < chars.length; i++) {
            if (chars[i] != cur) {
                chars[index++] = cur;
                cur = chars[i];
                if (count != 1) {
                    index = insertFrequency(chars, index, count);
                    count = 1;
                }
            } else {
                count++;
            }
        }
        chars[index++] = cur;
        if (count > 1) {
            index = insertFrequency(chars, index, count);
        }
        return index;
    }
}
