class Solution {

    public int compress(char[] chars) {
        // Pointer for writing back to chars
        int writeIndex = 0;
        // Counter for consecutive characters
        int count = 1;
        for (int i = 1; i <= chars.length; i++) {
            // If we reach the end or current character is different from previous one
            if (i == chars.length || chars[i] != chars[i - 1]) {
                // Write the previous character
                chars[writeIndex++] = chars[i - 1];
                // If the count is greater than 1, write the count as well
                if (count > 1) {
                    for (char digit : String.valueOf(count).toCharArray()) {
                        chars[writeIndex++] = digit;
                    }
                }
                // Reset count for the new character
                count = 1;
            } else {
                // If same character, increase the count
                count++;
            }
        }
        // Return the new length of the array
        return writeIndex;
    }
}
