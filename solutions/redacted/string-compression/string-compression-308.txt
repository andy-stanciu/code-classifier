class Solution {

    public int compress(char[] chars) {
        boolean firstChar = true;
        char lastChar = chars[0];
        int lastCharCount = 0;
        int index = 0;
        for (char c : chars) {
            if (firstChar) {
                lastChar = c;
                lastCharCount = 1;
                firstChar = !firstChar;
            } else {
                if (c == lastChar) {
                    lastCharCount++;
                } else {
                    chars[index] = lastChar;
                    if (lastCharCount > 1) {
                        for (char digit : Integer.toString(lastCharCount).toCharArray()) {
                            index++;
                            chars[index] = digit;
                        }
                    }
                    index++;
                    lastChar = c;
                    lastCharCount = 1;
                }
            }
        }
        if (lastCharCount >= 1) {
            chars[index] = lastChar;
            if (lastCharCount > 1) {
                for (char digit : Integer.toString(lastCharCount).toCharArray()) {
                    index++;
                    chars[index] = digit;
                }
            }
        }
        return index + 1;
    }
}
