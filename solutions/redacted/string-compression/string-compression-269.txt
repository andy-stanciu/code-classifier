class Solution {

    public int compress(char[] chars) {
        int prev_count = 0;
        int index = 0;
        char prev_char = chars[0];
        int n = chars.length;
        for (int i = 0; i < n; i++) {
            int x = 0;
            if (prev_char == chars[i]) {
                prev_count++;
            }
            if (i == n - 1) {
                x++;
            }
            if (prev_char != chars[i]) {
                x++;
            }
            for (int k = 0; k < x; k++) {
                chars[index] = prev_char;
                index++;
                if (prev_count > 1) {
                    for (char c : String.valueOf(prev_count).toCharArray()) {
                        chars[index] = c;
                        index++;
                    }
                }
                prev_char = chars[i];
                prev_count = 1;
            }
        }
        return index;
    }
}
