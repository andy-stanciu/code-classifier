class Solution {

    public double myPow(double x, int n) {
        return solve(x, (long) n);
    }

    public double solve(double x, long n) {
        long no;
        double x1;
        if (n < 0) {
            no = -n;
            x1 = 1 / x;
        } else {
            no = n;
            x1 = x;
        }
        if (no <= 0)
            return 1;
        if (no % 2 == 0)
            return solve(x1 * x1, no / 2);
        else
            return x1 * solve(x1 * x1, (no - 1) / 2);
    }
}
