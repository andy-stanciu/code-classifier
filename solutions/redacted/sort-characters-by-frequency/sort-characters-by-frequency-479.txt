class Solution {

    public String method1(String s) {
        //Build frequency map
        Map<Character, Long> hm = s.chars().mapToObj(k -> (char) k).collect(Collectors.groupingBy(Function.identity(), HashMap::new, Collectors.counting()));
        // sort string using frequency map in descending order and build a stringBuilder object and return string.
        return s.chars().mapToObj(k -> (char) k).sorted((a, b) -> Long.compare(hm.get(b), hm.get(a)) == 0 ? Character.compare(b, a) : Long.compare(hm.get(b), hm.get(a))).collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append).toString();
    }
}
