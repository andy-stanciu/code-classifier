class Solution {

    public List<List<String>> groupAnagrams(String[] strs) {
        Map<Long, List<String>> map = new HashMap<>();
        for (String s : strs) {
            long hash = hash(s);
            var list = map.getOrDefault(hash, new ArrayList<>());
            list.add(s);
            map.put(hash, list);
        }
        return map.values().stream().toList();
    }

    long hash(String toHash) {
        char[] symbols = toHash.toCharArray();
        int hash = 0;
        for (char symbol : symbols) {
            hash += symbol;
        }
        for (char symbol : symbols) {
            hash *= symbol;
        }
        for (char symbol : symbols) {
            hash ^= symbol;
        }
        return (hash) + 31 ^ toHash.length();
    }
}
