class Solution {

    public int lengthOfLIS(int[] nums) {
        List<Integer> temp = new ArrayList<>();
        for (int e : nums) {
            int index = InsertPosition(temp, e);
            if (index == temp.size())
                temp.add(e);
            else
                temp.set(index, e);
        }
        return temp.size();
    }

    static int InsertPosition(List<Integer> temp, int target) {
        int n = temp.size();
        int start = 0;
        int end = n - 1;
        while (start <= end) {
            int mid = (start + end) / 2;
            if (temp.get(mid) <= target) {
                start = mid + 1;
            } else {
                end = mid - 1;
            }
        }
        int insertPos = start;
        int lastIndex = start - 1;
        if (lastIndex >= 0 && temp.get(lastIndex) == target)
            return lastIndex;
        else
            return insertPos;
    }
}
