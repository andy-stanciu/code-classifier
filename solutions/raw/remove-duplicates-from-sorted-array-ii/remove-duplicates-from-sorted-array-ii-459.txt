class Solution {

    public int removeDuplicates(int[] nums) {
        int leftIdx = 0, repeatCount = 0, repNum = nums[0], MAX_REP_COUNT = 2;
        for (int rightIdx = 0; rightIdx < nums.length; rightIdx++) {
            if (nums[rightIdx] == repNum && repeatCount < MAX_REP_COUNT) {
                repeatCount++;
                nums[leftIdx++] = nums[rightIdx];
            } else if (nums[rightIdx] != repNum) {
                repeatCount = 1;
                nums[leftIdx++] = nums[rightIdx];
            }
            repNum = nums[rightIdx];
        }
        return leftIdx;
    }
}
