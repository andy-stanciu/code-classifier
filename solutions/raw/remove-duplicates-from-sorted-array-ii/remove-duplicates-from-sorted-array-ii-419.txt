class Solution {

    public int removeDuplicates(int[] nums) {
        int i = 0;
        int j = 0;
        int prev = nums[j];
        int count = 0;
        int resCount = 0;
        while (j < nums.length) {
            if (nums[j] != prev) {
                if (count > 2) {
                    count = 2;
                }
                resCount += count;
                for (int k = i; k < i + count; k++) {
                    nums[k] = prev;
                }
                prev = nums[j];
                i += count;
                count = 0;
            }
            j++;
            count++;
        }
        if (count > 2) {
            count = 2;
        }
        for (int k = i; k < i + count; k++) {
            nums[k] = prev;
        }
        return resCount + count;
    }
}
