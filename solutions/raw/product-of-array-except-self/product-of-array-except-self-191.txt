class Solution {

    public int[] productExceptSelf(int[] nums) {
        int[] answer = new int[nums.length];
        // Place prefix product in answers
        answer[0] = nums[0];
        for (int i = 1; i < answer.length; i++) {
            answer[i] = answer[i - 1] * nums[i];
        }
        // Replace nums with suffix product
        for (int j = nums.length - 2; j >= 0; j--) {
            nums[j] = nums[j] * nums[j + 1];
        }
        // Merge the two together to calculate the products, nums will act as a placeholder for prefix products
        nums[0] = answer[0];
        answer[0] = nums[1];
        for (int k = 1; k < answer.length - 1; k++) {
            // save old value from prefix product
            nums[k] = answer[k];
            answer[k] = nums[k - 1] * nums[k + 1];
        }
        answer[answer.length - 1] = nums[nums.length - 2];
        return answer;
    }
}
