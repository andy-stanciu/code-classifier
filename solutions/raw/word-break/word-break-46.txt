class Solution {

    HashSet<String> ht = new HashSet<String>();

    HashSet<Integer> memo = new HashSet<Integer>();

    boolean doit(int index, String str) {
        if (index == str.length())
            return true;
        for (int i = index; i <= str.length(); i++) {
            String word = str.substring(index, i);
            if (ht.contains(word) && !memo.contains(i)) {
                if (doit(i, str))
                    return true;
                memo.add(i);
            }
        }
        return false;
    }

    public boolean wordBreak(String s, List<String> wordDict) {
        for (String word : wordDict) ht.add(word);
        return doit(0, s);
    }
}
