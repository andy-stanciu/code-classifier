class Solution {

    public boolean wordBreak(String s, List<String> wordDict) {
        return left(s, wordDict) || right(s, wordDict);
    }

    public boolean left(String s, List<String> wordDict) {
        int upper = s.length();
        int lower = 0;
        while (lower < s.length()) {
            if (upper - lower > 20) {
                upper = lower + 20;
            }
            while (lower < upper) {
                if (wordDict.contains(s.substring(lower, upper))) {
                    break;
                } else {
                    upper--;
                }
            }
            if (lower == upper) {
                return false;
            }
            lower = upper;
            upper = s.length();
        }
        return true;
    }

    public boolean right(String s, List<String> wordDict) {
        int upper = s.length();
        int lower = 0;
        while (upper > 0) {
            if (upper - lower > 20) {
                lower = upper - 20;
            }
            while (lower < upper) {
                if (wordDict.contains(s.substring(lower, upper))) {
                    break;
                } else {
                    lower++;
                }
            }
            if (lower == upper) {
                return false;
            }
            upper = lower;
            lower = 0;
        }
        return true;
    }
}
