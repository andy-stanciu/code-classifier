class Solution {

    boolean[] memo;

    public boolean wordBreak(String s, List<String> wordDict) {
        memo = new boolean[s.length()];
        return helper(s, 0, new HashSet<>(wordDict));
    }

    public boolean helper(String s, int startIdx, Set<String> wordDict) {
        if (startIdx == s.length())
            return true;
        if (memo[startIdx])
            return true;
        for (String word : wordDict) {
            int end = startIdx + word.length();
            if (end <= s.length() && s.substring(startIdx, end).equals(word) && helper(s, end, wordDict)) {
                memo[startIdx] = true;
                return true;
            }
        }
        memo[startIdx] = false;
        return false;
    }
}
