class Solution {

    private Set<String> dictionary;

    private Boolean[][] segmentPossible;

    private int n;

    public boolean wordBreak(String s, List<String> wordDict) {
        n = s.length();
        dictionary = new HashSet<>(wordDict);
        segmentPossible = new Boolean[n][n];
        return segmentWord(s, 0, 0);
    }

    private boolean segmentWord(String s, int start, int end) {
        return end == n ? false : (segmentPossible[start][end] == null ? segmentPossible[start][end] = (dictionary.contains(word.substring(start, ++end)) ? (end == n ? true : segmentWord(word, end, end)) : false) || segmentWord(word, start, end) : segmentPossible[start][end]);
    }
}
