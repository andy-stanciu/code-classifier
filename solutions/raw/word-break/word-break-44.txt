class Solution {

    public boolean wordBreak(String s, List<String> wordDict) {
        return helper(s.toCharArray(), 0, wordDict, new HashSet<>());
    }

    public boolean helper(char[] arr, int index, List<String> wordDict, HashSet<Integer> set) {
        if (index == arr.length)
            return true;
        if (set.contains(index))
            return false;
        set.add(index);
        for (String item : wordDict) {
            int i = 0;
            while (// is in range
            i < item.length() && index + i < arr.length && item.charAt(i) == arr[index + i]) {
                i++;
            }
            if (// head is same word
            i == item.length() && helper(arr, index + item.length(), wordDict, set))
                return true;
        }
        return false;
    }
}
