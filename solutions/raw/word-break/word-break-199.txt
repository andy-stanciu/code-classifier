class Solution {

    public boolean wordBreak(String s, List<String> wordDict) {
        int size = s.length();
        int[] dp = new int[301];
        for (int i = 0; i <= 300; i++) dp[i] = -1;
        Set<String> stringSet = new HashSet<>(wordDict);
        return solve(0, size, dp, s, stringSet) == 1 ? true : false;
    }

    public int solve(int index, int size, int[] dp, String s, Set<String> dict) {
        if (dp[index] != -1)
            return dp[index];
        if (index >= size)
            return dp[index] = 1;
        for (int len = index + 1; len <= size; len++) {
            if (dict.contains(s.substring(index, len)) && solve(len, size, dp, s, dict) == 1)
                return dp[index] = 1;
        }
        return dp[index] = 0;
    }
}
