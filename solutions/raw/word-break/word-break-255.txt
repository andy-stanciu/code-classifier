class Solution {

    public boolean wordBreak(String s, List<String> wordDict) {
        Map<Character, List<String>> mp = new HashMap<Character, List<String>>();
        for (String word : wordDict) {
            mp.putIfAbsent(word.charAt(0), new ArrayList<String>());
            mp.get(word.charAt(0)).add(word);
        }
        int[] seen = new int[s.length()];
        return helperUtil(s, 0, mp, seen);
    }

    public boolean helperUtil(String s, int index, Map<Character, List<String>> mp, int[] seen) {
        if (index == s.length())
            return true;
        if (seen[index] == 1)
            return false;
        seen[index] = 1;
        StringBuffer sb = new StringBuffer(s);
        int flag = 0;
        if (mp.containsKey(sb.charAt(index)))
            for (String word : mp.get(sb.charAt(index))) {
                if (s.length() >= index + word.length() && word.equals(sb.substring(index, index + word.length())) && helperUtil(s, index + word.length(), mp, seen))
                    flag = 1;
            }
        if (flag == 1)
            return true;
        return false;
    }
}
