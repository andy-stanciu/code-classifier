class Solution {

    public boolean wordBreak(String s, List<String> wordDict) {
        Boolean[] isReachable = new Boolean[s.length()];
        return check(s, 0, 0, wordDict, isReachable);
    }

    boolean check(String s, int startIndex, int endIndex, List<String> wordDict, Boolean[] isReachable) {
        if (startIndex == s.length())
            return true;
        if (isReachable[startIndex] != null)
            return isReachable[startIndex];
        if (endIndex == s.length())
            return isReachable[startIndex] = false;
        if (wordDict.contains(s.substring(startIndex, endIndex + 1))) {
            return isReachable[startIndex] = (check(s, endIndex + 1, endIndex + 1, wordDict, isReachable) || check(s, startIndex, endIndex + 1, wordDict, isReachable));
        } else {
            return isReachable[startIndex] = check(s, startIndex, endIndex + 1, wordDict, isReachable);
        }
    }
}
