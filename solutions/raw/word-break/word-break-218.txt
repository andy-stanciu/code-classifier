class Solution {

    public boolean wordBreak(String s, List<String> wordDict) {
        int len = s.length();
        boolean[] reachable = new boolean[len];
        /**
         * start from right end
         * 1. mark every reachable to end/next true as true
         * 2. if false, check if reachable till next true index in reachable matrix and mark it
         */
        Set<String> wordSet = new HashSet<>(wordDict);
        for (int i = len - 1; i >= 0; i--) {
            String sub = s.substring(i);
            boolean reach = wordSet.contains(sub);
            if (reach) {
                reachable[i] = true;
            } else {
                // check till next true reachable
                int k = i + 1;
                while (k < len) {
                    if (reachable[k]) {
                        String sub2 = s.substring(i, k);
                        boolean r = wordSet.contains(sub2);
                        if (r) {
                            reachable[i] = true;
                            break;
                        }
                    }
                    k++;
                }
            }
        }
        System.out.println(Arrays.toString(reachable));
        return reachable[0];
    }
}
