class Solution {

    public ListNode reverseKGroup(ListNode head, int k) {
        ListNode temp = new ListNode(0, head);
        ListNode curr = head;
        head = temp;
        while (true) {
            // Checking if reverse possible?
            int i = k;
            ListNode temp2 = curr;
            while (--i > 0 && temp2 != null) temp2 = temp2.next;
            if (i > 0 || temp2 == null)
                break;
            // Reversing
            ListNode prev = null, next = null, main = null;
            int j = k;
            while (j-- > 0) {
                if (main == null)
                    main = curr;
                next = curr.next;
                curr.next = prev;
                prev = curr;
                curr = next;
            }
            head.next = prev;
            head = main;
            main.next = curr;
        }
        return temp.next;
    }
}
