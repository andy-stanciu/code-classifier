class Solution {

    public boolean canConstruct(String ransomNote, String magazine) {
        Map<Character, Integer> charCounters = buildCounters(magazine);
        for (int i = 0; i < ransomNote.length(); ++i) {
            Integer cnt = charCounters.computeIfPresent(ransomNote.charAt(i), (key, val) -> val - 1);
            if (cnt == null || cnt < 0)
                return false;
        }
        return true;
    }

    private static Map<Character, Integer> buildCounters(String magazine) {
        Map<Character, Integer> result = new HashMap<Character, Integer>(magazine.length());
        for (int i = 0; i < magazine.length(); ++i) {
            result.merge(magazine.charAt(i), 1, Integer::sum);
        }
        return result;
    }
}
