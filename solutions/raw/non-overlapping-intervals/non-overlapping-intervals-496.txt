class Solution {

    public int eraseOverlapIntervals(int[][] intervals) {
        Arrays.sort(intervals, (a, b) -> a[1] - b[1]);
        int[] dp = new int[intervals.length];
        Arrays.fill(dp, -1);
        return intervals.length - dfs(0, Integer.MIN_VALUE, intervals, dp);
    }

    int dfs(int index, int ended, int[][] intervals, int[] dp) {
        if (index == intervals.length)
            return 0;
        if (dp[index] != -1)
            return dp[index];
        int picked = Integer.MIN_VALUE;
        if (intervals[index][0] >= ended)
            picked = 1 + dfs(index + 1, intervals[index][1], intervals, dp);
        int notPicked = dfs(index + 1, ended, intervals, dp);
        dp[index] = (int) Math.max(picked, notPicked);
        return dp[index];
    }
}
