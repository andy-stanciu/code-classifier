class Solution {

    public int compress(char[] nums) {
        // index to update in the compressed array
        int k = 0;
        // start of the repeated characters
        int i = 0;
        // end of the repeated characters
        int j = 0;
        int n = nums.length;
        while (i <= j && j < n) {
            char ch = nums[i];
            while (j < n && nums[j] == ch) {
                j++;
            }
            int len = j - i;
            nums[k++] = ch;
            if (len > 1) {
                String lenStr = Integer.toString(len);
                for (char c : lenStr.toCharArray()) {
                    nums[k++] = c;
                }
            }
            // update i to the next non-repeated character
            i = j;
        }
        return k;
    }
}
