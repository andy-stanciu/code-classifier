class Solution {

    public int compress(char[] chars) {
        char runChar = chars[0];
        int currRunLen = 1, readIdx = 1, writeIdx = 0;
        while (readIdx < chars.length) {
            char currChar = chars[readIdx];
            readIdx++;
            if (currChar == runChar) {
                currRunLen++;
            } else {
                // Run is over. Record it in the original array.
                chars[writeIdx++] = runChar;
                if (currRunLen > 1) {
                    writeIdx = writeRunLen(chars, writeIdx, currRunLen);
                }
                runChar = currChar;
                currRunLen = 1;
            }
        }
        chars[writeIdx++] = runChar;
        if (currRunLen > 1) {
            writeIdx = writeRunLen(chars, writeIdx, currRunLen);
        }
        return writeIdx;
    }

    private int writeRunLen(char[] chars, int writeIdx, int runLen) {
        String runLenStr = String.valueOf(runLen);
        for (int i = 0; i < runLenStr.length(); i++) {
            chars[writeIdx++] = runLenStr.charAt(i);
        }
        return writeIdx;
    }
}
