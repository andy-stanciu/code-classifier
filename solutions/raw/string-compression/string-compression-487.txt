class Solution {

    public int compress(char[] chars) {
        StringBuilder sb = constructString(chars);
        int l = sb.length();
        for (int i = 0; i < l; i++) {
            chars[i] = sb.charAt(i);
        }
        return l;
    }

    private StringBuilder constructString(char[] chars) {
        StringBuilder sb = new StringBuilder();
        int length = 0;
        char curr = 0;
        for (char c : chars) {
            if (curr == c || curr == 0) {
                length++;
                curr = c;
                return;
            }
            sb.append(curr);
            if (length > 1) {
                sb.append(length);
            }
            length = 1;
            curr = c;
        }
        sb.append(curr);
        if (length > 1) {
            sb.append(length);
        }
        return sb;
    }
}
