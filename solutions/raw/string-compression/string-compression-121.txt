class Solution {

    public int compress(char[] chars) {
        int start = 0;
        int end = 0;
        int k = 0;
        int count;
        while (start < chars.length) {
            start = end;
            while (end < chars.length && chars[start] == chars[end]) {
                end++;
            }
            chars[k++] = chars[start];
            count = end - start;
            if (count >= 2) {
                String countStr = Integer.toString(count);
                for (char c : countStr.toCharArray()) {
                    chars[k++] = c;
                }
            }
            start = end;
        }
        return k;
    }
}
