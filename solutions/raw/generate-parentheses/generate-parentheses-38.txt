class Solution {

    public List<String> generateParenthesis(int n) {
        List<String> res = new ArrayList();
        genParen(n, "", 0, res);
        return res;
    }

    public void genParen(int n, String str, int open, List<String> res) {
        int strlen = str.length();
        if (// there should be n open & close parenthesis, so len should not be greater than 2*n
        open < 0 || strlen > (2 * n))
            return;
        if (open == 0 && strlen == (2 * n)) {
            res.add(str);
            return;
        }
        // open a parenthesis if open < n
        if (open < n)
            genParen(n, str + "(", open + 1, res);
        genParen(n, str + ")", open - 1, res);
    }
}
