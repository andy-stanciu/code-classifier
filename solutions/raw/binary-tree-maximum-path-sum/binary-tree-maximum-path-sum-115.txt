class Solution {

    int ans = Integer.MIN_VALUE;

    public int maxPathSum(TreeNode root) {
        if (root == null)
            return 0;
        solve(root);
        return ans;
    }

    public int solve(TreeNode root) {
        if (root == null)
            return 0;
        int l = solve(root.left);
        int r = solve(root.right);
        int t = root.val + l + r;
        int t1 = root.val + r;
        int t2 = root.val + l;
        int y = Math.max(t1, t2);
        y = Math.max(y, root.val);
        ans = Math.max(ans, Math.max(t, y));
        return y;
    }
}
