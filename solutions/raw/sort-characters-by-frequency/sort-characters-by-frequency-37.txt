class Solution {

    public String frequencySort2(String s) {
        Map<Character, Integer> letters = new HashMap<>();
        for (char c : s.toCharArray()) {
            letters.merge(c, 1, Integer::sum);
        }
        Map<Integer, List<Character>> count = new HashMap<>();
        letters.forEach((k, v) -> count.computeIfAbsent(v, val -> new ArrayList<>()).add(k));
        int max = Collections.max(count.keySet());
        StringBuilder ans = new StringBuilder();
        for (int i = max; i > 0; i--) {
            if (count.containsKey(i)) {
                List<Character> curr = count.get(i);
                for (char c : curr) {
                    ans.append(String.valueOf(c).repeat(i));
                }
            }
        }
        return ans.toString();
    }
}
