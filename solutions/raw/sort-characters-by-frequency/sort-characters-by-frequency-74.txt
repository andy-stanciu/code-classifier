class Solution {

    public String frequencySort(String s) {
        // Store frequency of characters
        int[] freqMap = new int[123];
        for (char ch : s.toCharArray()) {
            freqMap[ch]++;
        }
        // Map frequencies to letters
        Map<Integer, List<Character>> occurs = new HashMap<>();
        for (int i = 48; i < 123; i++) {
            // Skip if frequency is 0
            if (freqMap[i] == 0)
                continue;
            if (!occurs.containsKey(freqMap[i])) {
                // If frequency not present in map
                // Create a new list
                occurs.put(freqMap[i], new ArrayList());
            }
            // Add character to list
            occurs.get(freqMap[i]).add((char) i);
        }
        // List of frequencies
        List<Integer> keyList = new ArrayList<>(occurs.keySet());
        // Sort the list based on keys in decreasing order
        Collections.sort(keyList, Collections.reverseOrder());
        // StringBuilder to store the result
        StringBuilder sb = new StringBuilder("");
        for (int frq : keyList) {
            // Traverse frequencies in decreasing order
            for (char ch : occurs.get(frq)) {
                // For all characters with current frequency
                for (int i = 1; i <= frq; i++) {
                    // Append character frq times
                    // Add them to result
                    sb.append(ch);
                }
            }
        }
        // Return the final sorted string
        return sb.toString();
    }
}
