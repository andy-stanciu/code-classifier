class Solution {

    int[][] dp;

    int counter;

    int total;

    public int coinChange(int[] coins, int amount) {
        dp = new int[coins.length + 1][amount + 1];
        for (int[] row : dp) {
            Arrays.fill(row, -1);
        }
        int result = minimizeCoins(coins, amount, 0, 0);
        // System.out.println(counter + " out of " + total);
        return result > Math.pow(10, 4) ? -1 : result;
    }

    private int minimizeCoins(int[] coins, int amount, int index, int current) {
        if (index >= coins.length || current > amount) {
            return current == amount ? 0 : 10000 + 1;
        }
        total++;
        if (dp[index][current] != -1) {
            counter++;
            return dp[index][current];
        }
        int notTake = minimizeCoins(coins, amount, index + 1, current);
        if ((long) coins[index] + current <= amount) {
            int take = 1 + minimizeCoins(coins, amount, index, current + coins[index]);
            dp[index][current] = Math.min(take, notTake);
        } else {
            dp[index][current] = notTake;
        }
        return dp[index][current];
    }
}
