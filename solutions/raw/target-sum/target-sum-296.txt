class Solution {

    public int findTargetSumWays(int[] nums, int target) {
        return target(nums, target, 0, new HashMap<String, Integer>(), 0);
    }

    public int target(int[] nums, int target, int idx, HashMap<String, Integer> map, int sum) {
        if (idx == nums.length)
            return sum == target ? 1 : 0;
        String key = idx + "|" + sum;
        if (!map.containsKey(key)) {
            int inc = target(nums, target, idx + 1, map, sum + nums[idx]);
            int exc = target(nums, target, idx + 1, map, sum - nums[idx]);
            map.put(key, inc + exc);
        }
        return map.get(key);
    }
}
