class Solution {

    public int[] asteroidCollision(int[] asteroids) {
        //position of well-placed asteroids
        int pos = -1;
        main: for (var a : asteroids) {
            if (a < 0)
                while (pos >= 0 && asteroids[pos] > 0) if (asteroids[pos] > -a)
                    continue main;
                else if (asteroids[pos--] == -a)
                    continue main;
            asteroids[++pos] = a;
        }
        return Arrays.copyOfRange(asteroids, 0, pos + 1);
    }
}
