class Solution {

    public int[] asteroidCollision(int[] asteroids) {
        int top = -1;
        for (int asteroid : asteroids) {
            boolean destroyed = false;
            while (top >= 0 && asteroid < 0 && asteroids[top] > 0) {
                if (asteroids[top] < -asteroid) {
                    top--;
                } else if (asteroids[top] == -asteroid) {
                    top--;
                    destroyed = true;
                    break;
                } else {
                    destroyed = true;
                    break;
                }
            }
            if (!destroyed) {
                asteroids[++top] = asteroid;
            }
        }
        int[] res = new int[top + 1];
        System.arraycopy(asteroids, 0, res, 0, top + 1);
        return res;
    }
}
