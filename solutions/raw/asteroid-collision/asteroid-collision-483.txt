class Solution {

    public int[] asteroidCollision(int[] asteroids) {
        int n = asteroids.length;
        int[] remainingAsteroids = new int[n];
        int index = 0;
        for (int i = 0; i < n; i++) {
            boolean flag = true;
            int a = asteroids[i];
            int absA = Math.abs(a);
            while (index > 0 && remainingAsteroids[index - 1] > 0 && a < 0) {
                int absTop = Math.abs(remainingAsteroids[index - 1]);
                if (absTop < absA) {
                    index--;
                    continue;
                } else if (absTop == absA) {
                    index--;
                }
                flag = false;
                break;
            }
            if (flag) {
                remainingAsteroids[index++] = a;
            }
        }
        return Arrays.copyOf(remainingAsteroids, index);
    }
}
