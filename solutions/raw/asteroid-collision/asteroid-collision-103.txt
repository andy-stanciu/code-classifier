class Solution {

    public int[] asteroidCollision(int[] asteroids) {
        int stackIndex = -1;
        for (int n : asteroids) {
            boolean exploded = false;
            while (stackIndex >= 0 && n < 0 && asteroids[stackIndex] > 0) {
                if (Math.abs(n) > Math.abs(asteroids[stackIndex])) {
                    stackIndex--;
                } else if (Math.abs(n) == Math.abs(asteroids[stackIndex])) {
                    stackIndex--;
                    exploded = true;
                    break;
                } else {
                    exploded = true;
                    break;
                }
            }
            if (!exploded) {
                asteroids[++stackIndex] = n;
            }
        }
        int[] result = new int[stackIndex + 1];
        for (int i = 0; i <= stackIndex; i++) {
            result[i] = asteroids[i];
        }
        return result;
    }
}
