class Solution {

    public int[] asteroidCollision(int[] asteroids) {
        int len = asteroids.length;
        int top = -1;
        for (int pos = 0; pos < len; pos++) {
            int currAsteroid = asteroids[pos];
            if (currAsteroid > 0) {
                asteroids[++top] = asteroids[pos];
            } else {
                boolean needAdd = true;
                while (top > -1 && asteroids[top] > 0) {
                    int sum = asteroids[top] + currAsteroid;
                    if (sum <= 0) {
                        top--;
                    }
                    if (sum >= 0) {
                        needAdd = false;
                        break;
                    }
                }
                if (needAdd)
                    asteroids[++top] = asteroids[pos];
            }
        }
        return Arrays.copyOf(asteroids, top + 1);
    }
}
