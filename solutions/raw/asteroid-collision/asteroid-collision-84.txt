class Solution {

    public int[] asteroidCollision(int[] asteroids) {
        int l = asteroids.length;
        Stack<Integer> stack = new Stack<>();
        stack.push(asteroids[0]);
        int v;
        int p;
        for (int i = 1; i < l; i++) {
            v = asteroids[i];
            if (v < 0) {
                while (true) {
                    if (stack.isEmpty()) {
                        stack.push(v);
                        break;
                    }
                    p = stack.peek();
                    if (p < 0) {
                        stack.push(v);
                        break;
                    } else if (p > 0 && p + v < 0) {
                        stack.pop();
                    } else if (p + v == 0) {
                        stack.pop();
                        break;
                    } else {
                        break;
                    }
                }
                //System.out.println(stack);
            } else {
                stack.push(v);
            }
        }
        int sl = stack.size();
        int[] returnVal = new int[sl];
        for (int j = 0; j < sl; j++) {
            returnVal[j] = stack.get(j);
        }
        return returnVal;
    }
}
