class Solution {

    public int maxSubArray(int[] nums) {
        return maxSubArrayHelper(nums, 0, nums.length - 1);
    }

    public int maxSubArrayHelper(int[] nums, int l, int h) {
        if (l == h) {
            return nums[l];
        }
        int mid = (l + h) / 2;
        int lss = maxSubArrayHelper(nums, l, mid);
        int rss = maxSubArrayHelper(nums, mid + 1, h);
        int css = maxCrossSubArray(nums, l, mid, h);
        return Math.max(lss, Math.max(rss, css));
    }

    public int maxCrossSubArray(int[] nums, int l, int mid, int h) {
        int leftSum = nums[mid];
        int sum = 0;
        for (int i = mid; i >= l; i--) {
            sum = sum + nums[i];
            if (leftSum < sum) {
                leftSum = sum;
            }
        }
        int rightSum = nums[mid + 1];
        sum = 0;
        for (int i = mid + 1; i <= h; i++) {
            sum = sum + nums[i];
            if (rightSum < sum) {
                rightSum = sum;
            }
        }
        return leftSum + rightSum;
    }
}
