class Solution {

    public List<Double> averageOfLevels(TreeNode root) {
        List<Double> count = new ArrayList<>();
        List<Double> sum = new ArrayList<>();
        int level = 0;
        avg(root, count, sum, level);
        for (int i = 0; i < sum.size(); i++) {
            double avg = sum.get(i) / count.get(i);
            sum.set(i, avg);
        }
        return sum;
    }

    public void avg(TreeNode root, List<Double> count, List<Double> sum, int level) {
        if (root == null)
            return;
        double countVal = 0;
        if (level >= count.size()) {
            count.add(0.0);
            sum.add(0.0);
        }
        count.set(level, count.get(level) + 1);
        double sumVal = sum.get(level) + root.val;
        sum.set(level, sumVal);
        avg(root.left, count, sum, level + 1);
        avg(root.right, count, sum, level + 1);
    }
}
