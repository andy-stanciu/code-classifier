class Solution {

    public List<Double> averageOfLevels(TreeNode root) {
        List<Double> averageOfLevels = new ArrayList();
        if (root == null) {
            return averageOfLevels;
        }
        List<TreeNode> frontier = new ArrayList();
        frontier.add(root);
        while (frontier.size() != 0) {
            List<TreeNode> next = new ArrayList();
            double avg = 0;
            int count = 1;
            for (TreeNode cur : frontier) {
                avg = avg + (cur.val - avg) / count;
                if (cur.left != null) {
                    next.add(cur.left);
                }
                if (cur.right != null) {
                    next.add(cur.right);
                }
                count++;
            }
            averageOfLevels.add(avg);
            frontier = next;
        }
        return averageOfLevels;
    }
}
