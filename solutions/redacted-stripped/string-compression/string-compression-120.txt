class Solution {

    public int compress(char[] chars) {
        int i = 0, j = 0, k = 0;
        int n = chars.length;
        while (i < n) {
            while (i < n && chars[i] == chars[j]) i++;
            chars[k++] = chars[j];
            if (i - j > 1) {
                String diff = Integer.toString(i - j);
                for (int l = 0; l < diff.length(); l++) chars[k++] = diff.charAt(l);
            }
            j = i;
        }
        return k;
    }
}
