class Solution {

    public int method1(TreeNode root) {
        return method2(root);
    }

    int method2(TreeNode root) {
        if (root == null)
            return 0;
        int height = heightHelper(root, true);
        int heightRight = heightHelper(root.right, true);
        if (heightRight == height - 1) {
            int var2 = (1 << (height - 1)) - 1;
            return 1 + var2 + method2(root.right);
        } else {
            int var1 = (1 << (heightRight)) - 1;
            return 1 + var1 + method2(root.left);
        }
    }

    int heightHelper(TreeNode root, boolean left) {
        if (root == null)
            return 0;
        TreeNode current = root;
        int height = 0;
        while (current != null) {
            height++;
            if (left)
                current = current.left;
            else
                current = current.right;
        }
        return height;
    }
}
