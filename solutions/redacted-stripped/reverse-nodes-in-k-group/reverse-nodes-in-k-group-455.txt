class Solution {

    public ListNode method1(ListNode head, int k) {
        ListNode result = new ListNode();
        result.next = head;
        ListNode current = head;
        ListNode newHead = null;
        ListNode curTail = head;
        ListNode prevTail = null;
        while (current != null) {
            ListNode start = current;
            int i = 0;
            while (i < k && current != null) {
                current = current.next;
                i++;
            }
            if (i != k) {
                prevTail.next = curTail;
                break;
            }
            while (start != null && current != start) {
                ListNode next = start.next;
                start.next = newHead;
                newHead = start;
                start = next;
            }
            if (prevTail == null) {
                result.next = newHead;
            } else {
                prevTail.next = newHead;
            }
            prevTail = curTail;
            curTail = start;
            newHead = null;
        }
        return result.next;
    }
}
