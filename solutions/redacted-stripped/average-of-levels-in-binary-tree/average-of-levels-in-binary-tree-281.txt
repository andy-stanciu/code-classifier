class Solution {

    ArrayList<Double> arr = new ArrayList<>();

    double count = 0;

    public List<Double> method1(TreeNode root) {
        int height = height(root);
        for (int i = 1; i <= height; i++) {
            count = 0;
            double sum = levelorder(root, i, 0);
            double avg = sum / count;
            arr.add(avg);
        }
        return arr;
    }

    double levelorder(TreeNode root, int level, double sum) {
        if (root == null)
            return 0;
        if (level == 1) {
            sum += root.val;
            count++;
        } else {
            double l = levelorder(root.left, level - 1, 0);
            double r = levelorder(root.right, level - 1, sum);
            sum = l + r;
        }
        return sum;
    }

    int height(TreeNode root) {
        if (root == null)
            return 0;
        int lh = height(root.left);
        int rh = height(root.right);
        if (rh > lh)
            return rh + 1;
        else
            return lh + 1;
    }
}
