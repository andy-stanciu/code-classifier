class Solution {

    public ListNode method1(ListNode list1, ListNode list2) {
        ListNode first = new ListNode(0, null);
        ListNode result = first;
        Set<ListNode> set = new HashSet<>();
        while (list1 != null) {
            set.add(list1);
            list1 = list1.next;
        }
        while (list2 != null) {
            set.add(list2);
            list2 = list2.next;
        }
        List<ListNode> list = set.stream().sorted(Comparator.comparingInt(l -> l.val)).toList();
        for (int i = 0; i < list.size(); i++) {
            first.next = list.get(i);
            if (i == list.size() - 1) {
                list.get(list.size() - 1).next = null;
            }
            first = first.next;
        }
        return result.next;
    }
}
