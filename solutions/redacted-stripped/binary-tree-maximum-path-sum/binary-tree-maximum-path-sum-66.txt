class Solution {

    int res = Integer.MIN_VALUE;

    public int method1(TreeNode root) {
        max(root);
        return res;
    }

    private int max(TreeNode root) {
        if (root == null)
            return 0;
        if (root.left == null && root.right == null) {
            res = Math.max(res, root.val);
            return root.val;
        }
        int possibility1 = root.val;
        res = Math.max(possibility1, res);
        int possibility2 = root.val + max(root.left);
        res = Math.max(possibility2, res);
        int possibility3 = root.val + max(root.right);
        res = Math.max(possibility3, res);
        int possibility4 = possibility2 + possibility3 - possibility1;
        res = Math.max(possibility4, res);
        return Math.max(possibility1, Math.max(possibility2, possibility3));
    }
}
