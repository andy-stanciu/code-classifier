class Solution {

    int res = Integer.MIN_VALUE;

    public int method1(TreeNode root) {
        helper(root);
        return res;
    }

    private int helper(TreeNode root) {
        if (root == null)
            return Integer.MIN_VALUE;
        if (root.left == null && root.right == null) {
            res = Math.max(res, root.val);
            return root.val;
        }
        int left = helper(root.left);
        int right = helper(root.right);
        int tmp1 = Math.max(left, right);
        int tmp2 = Math.max(tmp1 + root.val, root.val);
        if (left != Integer.MIN_VALUE && right != Integer.MIN_VALUE) {
            int tmp3 = Math.max(tmp2, left + root.val + right);
            res = Math.max(res, tmp3);
        } else {
            res = Math.max(res, tmp2);
        }
        return tmp2;
    }
}
