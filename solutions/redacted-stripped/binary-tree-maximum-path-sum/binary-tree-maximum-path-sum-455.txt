class Solution {

    int ans = Integer.MIN_VALUE;

    public int method1(TreeNode root) {
        method2(root);
        return ans;
    }

    private int method2(TreeNode root) {
        if (root == null)
            return 0;
        int left = method2(root.left);
        int right = method2(root.right);
        int takingAll = left + right + root.val;
        int skippingOne = Math.max(left, right) + root.val;
        int skippingBoth = root.val;
        int var1 = Math.max(takingAll, Math.max(skippingOne, skippingBoth));
        ans = Math.max(ans, var1);
        return Math.max(skippingOne, skippingBoth);
    }
}
