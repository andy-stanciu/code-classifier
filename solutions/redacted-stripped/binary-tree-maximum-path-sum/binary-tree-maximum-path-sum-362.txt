class Solution {

    public int method1(TreeNode root) {
        return bestAnswer(root)[0];
    }

    public int[] bestAnswer(TreeNode root) {
        if (root == null) {
            return null;
        }
        int leftBest;
        int rightBest;
        int var1;
        int var2;
        int bestAnswer = root.val;
        int var3 = root.val;
        int[] leftAnswer = bestAnswer(root.left);
        if (leftAnswer != null) {
            leftBest = leftAnswer[0];
            var1 = leftAnswer[1];
            var3 = Math.max(var3, root.val + var1);
            bestAnswer = Math.max(leftBest, bestAnswer);
            bestAnswer = Math.max(bestAnswer, root.val + var1);
        }
        int[] rightAnswer = bestAnswer(root.right);
        if (rightAnswer != null) {
            rightBest = rightAnswer[0];
            var2 = rightAnswer[1];
            var3 = Math.max(var3, root.val + var2);
            bestAnswer = Math.max(rightBest, bestAnswer);
            bestAnswer = Math.max(bestAnswer, root.val + var2);
        }
        if (leftAnswer != null && rightAnswer != null) {
            var1 = leftAnswer[1];
            var2 = rightAnswer[1];
            bestAnswer = Math.max(bestAnswer, var1 + root.val + var2);
        }
        return new int[] { bestAnswer, var3 };
    }
}
