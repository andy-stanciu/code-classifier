class Solution {

    public int lengthOfLIS(int[] nums) {
        TreeMap<Integer, Integer> tmap = new TreeMap<>();
        tmap.put(Integer.MIN_VALUE, 0);
        for (int val : nums) {
            Integer prev = tmap.lowerKey(val);
            Integer next = tmap.ceilingKey(val);
            if (next == null)
                tmap.put(val, tmap.get(prev) + 1);
            else
                tmap.put(val, tmap.remove(next));
        }
        return tmap.lastEntry().getValue();
    }
}
