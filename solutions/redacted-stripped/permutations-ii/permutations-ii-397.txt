class Solution {

    public List<List<Integer>> permuteUnique(int[] nums) {
        Set<List<Integer>> ans = new HashSet();
        ans = permuteHelp(new ArrayList<>(), nums);
        return new ArrayList(ans);
    }

    static Set<List<Integer>> permuteHelp(List<Integer> up, int[] base) {
        if (base.length == 0) {
            Set<List<Integer>> sublist = new HashSet();
            sublist.add(up);
            return sublist;
        }
        int firstNum = base[0];
        Set<List<Integer>> answer = new HashSet();
        for (int i = 0; i <= up.size(); i++) {
            List<Integer> temp = new ArrayList<>();
            temp.addAll(up.subList(0, i));
            temp.add(firstNum);
            temp.addAll(up.subList(i, up.size()));
            answer.addAll(permuteHelp(temp, Arrays.copyOfRange(base, 1, base.length)));
        }
        return answer;
    }
}
