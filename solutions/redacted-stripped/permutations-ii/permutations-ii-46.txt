class Solution {

    private void permuteUnique(int[] nums, List<Integer> permutation, List<List<Integer>> param1, HashMap<Integer, Integer> freqMap, HashSet<List<Integer>> visited) {
        if (permutation.size() >= nums.length) {
            if (!visited.contains(permutation)) {
                param1.add(new ArrayList(permutation));
                visited.add(new ArrayList(permutation));
            }
            return;
        }
        for (int i = 0; i < nums.length; i++) {
            if (freqMap.getOrDefault(nums[i], 0) <= 0)
                continue;
            freqMap.put(nums[i], freqMap.getOrDefault(nums[i], 0) - 1);
            permutation.add(nums[i]);
            permuteUnique(nums, permutation, param1, freqMap, visited);
            permutation.remove(permutation.size() - 1);
            freqMap.put(nums[i], freqMap.getOrDefault(nums[i], 0) + 1);
        }
    }

    public List<List<Integer>> permuteUnique(int[] nums) {
        List<List<Integer>> var1 = new ArrayList();
        HashMap<Integer, Integer> freqMap = new HashMap();
        for (int i = 0; i < nums.length; i++) {
            freqMap.put(nums[i], freqMap.getOrDefault(nums[i], 0) + 1);
        }
        HashSet<List<Integer>> visited = new HashSet();
        permuteUnique(nums, new ArrayList(), var1, freqMap, visited);
        return var1;
    }
}
