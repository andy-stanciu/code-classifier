class Solution {

    public List<List<Integer>> permuteUnique(int[] nums) {
        Arrays.sort(nums);
        List<List<Integer>> ans = new ArrayList<>();
        generateAll(nums, ans, new ArrayList<>());
        return ans;
    }

    public void generateAll(int[] nums, List<List<Integer>> ans, List<Integer> p) {
        boolean flag = false;
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] != 11) {
                if (i == 0 || (nums[i - 1] != nums[i])) {
                    flag = true;
                    p.add(nums[i]);
                    int temp = nums[i];
                    nums[i] = 11;
                    generateAll(nums, ans, p);
                    nums[i] = temp;
                    p.remove(p.size() - 1);
                }
            }
        }
        if (!flag)
            ans.add(new ArrayList<>(p));
    }
}
